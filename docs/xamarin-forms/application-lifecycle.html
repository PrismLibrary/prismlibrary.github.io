<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Application Lifecycle Management | Prism </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Application Lifecycle Management | Prism ">
    <meta name="generator" content="docfx 2.56.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/affix.css">
    <meta property="docfx:navrel" content="../../toc">
    <meta property="docfx:tocrel" content="../toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../images/prism-logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                <ul class="nav level1 navbar-nav">
                  <li class="">
                    <a href="//prismlibrary.com/" title="Home" class="">Home</a>
                  </li>
                  <li class="active">
                    <a href="../../docs/index.html" title="Documentation" class="active">Documentation</a>
                  </li>
                </ul>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <a href="../index.html" title="Introduction" class="">Introduction</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Getting Started</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../getting-started/Download-and-Setup-Prism.html" title="Download and Setup Prism" class="">Download and Setup Prism</a>
                          </li>
                          <li class="">
                            <a href="../getting-started/NuGet-Packages.html" title="NuGet Packages" class="">NuGet Packages</a>
                          </li>
                          <li class="">
                            <a href="../getting-started/productivity-tools.html" title="Productivity Tools" class="">Productivity Tools</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Dependency Injection</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../dependency-injection/index.html" title="Getting Started" class="">Getting Started</a>
                          </li>
                          <li class="">
                            <a href="../dependency-injection/registering-types.html" title="Registering Types" class="">Registering Types</a>
                          </li>
                          <li class="">
                            <a href="../dependency-injection/platform-specific-services.html" title="Platform Specific Services" class="">Platform Specific Services</a>
                          </li>
                          <li class="">
                            <a href="../dependency-injection/resolution-errors.html" title="Exception Handling" class="">Exception Handling</a>
                          </li>
                          <li class="">
                            <a href="../dependency-injection/container-locator.html" title="ContainerLocator" class="">ContainerLocator</a>
                          </li>
                          <li class="">
                            <a href="../dependency-injection/add-custom-container.html" title="Adding a Custom Container" class="">Adding a Custom Container</a>
                          </li>
                          <li class="">
                            <a href="../dependency-injection/appendix.html" title="Appendix" class="">Appendix</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <a href="../commanding.html" title="Commanding" class="">Commanding</a>
                    </li>
                    <li class="">
                      <a href="../composite-commands.html" title="Composite Commands" class="">Composite Commands</a>
                    </li>
                    <li class="">
                      <a href="../event-aggregator.html" title="Event Aggregator" class="">Event Aggregator</a>
                    </li>
                    <li class="">
                      <a href="../viewmodel-locator.html" title="ViewModelLocator" class="">ViewModelLocator</a>
                    </li>
                    <li class="">
                      <a href="../modules.html" title="Modules" class="">Modules</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">WPF / Uno</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../wpf/introduction.html" title="Introduction" class="">Introduction</a>
                          </li>
                          <li class="">
                            <a href="../wpf/getting-started.html" title="Getting Started" class="">Getting Started</a>
                          </li>
                          <li class="">
                            <a href="../wpf/converting-from-7.html" title="Converting From Prism 7.x" class="">Converting From Prism 7.x</a>
                          </li>
                          <li class="">
                            <a href="../wpf/converting-from-6.html" title="Converting From Prism 6.x" class="">Converting From Prism 6.x</a>
                          </li>
                          <li class="">
                            <a href="../wpf/view-composition.html" title="View Composition" class="">View Composition</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Region Navigation</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../wpf/region-navigation/index.html" title="About Navigation in Prism" class="">About Navigation in Prism</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/region-navigation/basic-region-navigation.html" title="Basic Region Navigation" class="">Basic Region Navigation</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/region-navigation/view-viewmodel-participation.html" title="View/ViewModel Participation" class="">View/ViewModel Participation</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/region-navigation/navigation-existing-views.html" title="Navigating to Existing Views" class="">Navigating to Existing Views</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/region-navigation/passing-parameters.html" title="Passing Parameters" class="">Passing Parameters</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/region-navigation/confirming-navigation.html" title="Confirming Navigation" class="">Confirming Navigation</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/region-navigation/controlling-view-lifetime.html" title="Controlling View Lifetime" class="">Controlling View Lifetime</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/region-navigation/navigation-journal.html" title="Navigation Journal" class="">Navigation Journal</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Interactivity</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../wpf/interactivity/event-to-command.html" title="Event To Command" class="">Event To Command</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <a href="../wpf/dialog-service.html" title="Dialog Service" class="">Dialog Service</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Advanced</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../wpf/advanced/region-adapters.html" title="Region Adapters" class="">Region Adapters</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Legacy (Prism 6)</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../wpf/legacy/Introduction.html" title="Introduction" class="">Introduction</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Initializing.html" title="Initializing" class="">Initializing</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Managing-Dependencies.html" title="Managing-Dependencies" class="">Managing-Dependencies</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Modules.html" title="Modules" class="">Modules</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Implementing-MVVM.html" title="Implementing-MVVM" class="">Implementing-MVVM</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Advanced-MVVM.html" title="Advanced-MVVM" class="">Advanced-MVVM</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Composing-the-UI.html" title="Composing-the-UI" class="">Composing-the-UI</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Navigation.html" title="Navigation" class="">Navigation</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Communication.html" title="Communication" class="">Communication</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Deploying.html" title="Deploying" class="">Deploying</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Appendix-A-Glossary.html" title="Appendix-A-Glossary" class="">Appendix-A-Glossary</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Appendix-B-Patterns.html" title="Appendix-B-Patterns" class="">Appendix-B-Patterns</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Appendix-C-Prism-Library.html" title="Appendix-C-Prism-Library" class="">Appendix-C-Prism-Library</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Appendix-D-Extending-Prism.html" title="Appendix-D-Extending-Prism" class="">Appendix-D-Extending-Prism</a>
                                </li>
                                <li class="">
                                  <a href="../wpf/legacy/Appendix-E-Click-Once.html" title="Appendix-E-Click-Once" class="">Appendix-E-Click-Once</a>
                                </li>
                              </ul>  </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Xamarin.Forms</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../xamarin-forms/creating-your-first-prism-app.html" title="Create Your First App" class="">Create Your First App</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Behaviors</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../xamarin-forms/behaviors/index.html" title="Working with Behaviors" class="">Working with Behaviors</a>
                                </li>
                                <li class="">
                                  <a href="../xamarin-forms/behaviors/eventtocommandbehavior.html" title="EventToCommand Behavior" class="">EventToCommand Behavior</a>
                                </li>
                                <li class="">
                                  <a href="../xamarin-forms/behaviors/page-behavior-factory.html" title="PageBehaviorFactory" class="">PageBehaviorFactory</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Dialogs</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../xamarin-forms/dialogs/index.html" title="Dialogs" class="">Dialogs</a>
                                </li>
                                <li class="">
                                  <a href="../xamarin-forms/dialogs/page-dialog-service.html" title="Page Dialog Service" class="">Page Dialog Service</a>
                                </li>
                                <li class="">
                                  <a href="../xamarin-forms/dialogs/dialog-service.html" title="Dialog Service" class="">Dialog Service</a>
                                </li>
                                <li class="">
                                  <a href="../xamarin-forms/dialogs/styling-dialogs.html" title="Styling Dialogs" class="">Styling Dialogs</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Navigation</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../xamarin-forms/navigation/navigation-basics.html" title="Navigation Basics" class="">Navigation Basics</a>
                                </li>
                                <li class="">
                                  <a href="../xamarin-forms/navigation/passing-parameters.html" title="Passing Parameters" class="">Passing Parameters</a>
                                </li>
                                <li class="">
                                  <a href="../xamarin-forms/navigation/confirming-navigation.html" title="Confirming Navigation" class="">Confirming Navigation</a>
                                </li>
                                <li class="">
                                  <a href="../xamarin-forms/navigation/deep-linking.html" title="Deep Linking" class="">Deep Linking</a>
                                </li>
                                <li class="">
                                  <a href="../xamarin-forms/navigation/working-with-masterdetailpages.html" title="Working w/ MasterDetailPages" class="">Working w/ MasterDetailPages</a>
                                </li>
                                <li class="">
                                  <a href="../xamarin-forms/navigation/working-with-navigationpages.html" title="Working w/ NavigationPages" class="">Working w/ NavigationPages</a>
                                </li>
                                <li class="">
                                  <a href="../xamarin-forms/navigation/working-with-tabbedpages.html" title="Working w/ TabbedPages" class="">Working w/ TabbedPages</a>
                                </li>
                                <li class="">
                                  <a href="../xamarin-forms/navigation/xaml-navigation.html" title="XAML Navigation" class="">XAML Navigation</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <a href="../xamarin-forms/auto-initialization.html" title="Auto Initialization" class="">Auto Initialization</a>
                          </li>
                          <li class="active">
                            <a href="../xamarin-forms/application-lifecycle.html" title="Application Lifecycle" class="active">Application Lifecycle</a>
                          </li>
                          <li class="">
                            <a href="../xamarin-forms/page-lifecycle.html" title="Page Lifecycle" class="">Page Lifecycle</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Additional Platforms</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../xamarin-forms/platform-reference/gtk.html" title="GTK" class="">GTK</a>
                                </li>
                              </ul>  </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="application-lifecycle-management">Application Lifecycle Management</h1>

<p>Mobile applications development has to deal with the concept of <strong>application lifecycle</strong>. With this we mean that mobile apps are created to manage scenarios where battery life, CPU and memory are limited (as opposed to the classic desktop app where all of this is unlimited).</p>
<p>When a mobile app is running in backgroud it is <strong>suspended</strong> by the OS after a few seconds. The exact timing is different from OS to OS and other factors. When the application is suspended it is frozen: the app will continue to use memory but all the running operations are stopped. This way, every other application can make use of resources. However RAM isn&#39;t infinite and the app will be <strong>killed</strong> by the OS to free some memory if necessary.</p>
<p>As mobile developers you need to take care of this to provide your users a smooth and transparent experience whenever possible and restore the previous state of the app.</p>
<p>The typical application lifecycle events are:</p>
<ul>
<li><strong>Initializing</strong>. This happens the first time the app is launched.</li>
<li><strong>Resuming</strong>. This happens every time we restore the app from the background after it has been suspended.</li>
<li><strong>Sleeping</strong>. This happens when the OS decides to freeze our app after it has gone in background.</li>
</ul>
<p>The management of these events can be tricky in an MVVM app but Prism provides the <a href="https://github.com/PrismLibrary/Prism/blob/master/Source/Xamarin/Prism.Forms/AppModel/IApplicationLifecycleAware.cs">IApplicationLifecycleAware</a> interface to make your life easier.</p>
<h2 id="how-to-handle-alm-in-your-viewmodels">How to handle ALM in your ViewModels</h2>
<p>The first thing you have to do to is to implement the <code>IApplicationLifecycleAware</code> interface in your <strong>ViewModel</strong> class. Implemening this interface means that you have to provide an implementation of the <code>OnResume()</code> and <code>OnSleep()</code> method that are called by the framework when the app is resuming and going to sleep respectively. The typical operation you&#39;ll do in the <code>OnSleep()</code> method is to <strong>save</strong> the state of your ViewModel to later <strong>restore</strong> it during the execution of the <code>OnResume()</code> method.</p>
<p>The following is an example of a ViewModel that implements <code>IApplicationLifecycleAware</code>.</p>
<pre><code class="lang-csharp">public class ViewModelExample : ViewModelBase, IApplicationLifecycleAware
{
    protected INavigationService NavigationService { get; }

    public ViewModelExample(INavigationService navigationService)
    {
        NavigationService = navigationService;
    }

    public void OnResume()
    {
        //Restore the state of your ViewModel.
    }

    public  void OnSleep()
    {
        //Save the state of your ViewModel.
    }
}
</code></pre><h2 id="how-to-handle-alm-at-application-level">How to handle ALM at Application level</h2>
<p>You can handle ALM events at the <strong>Application</strong> level by overriding the <code>OnSleep()</code> and <code>OnResume()</code> methods in the <code>App</code> class.
The following is an example of an <code>App</code> class with ALM management.</p>
<pre><code class="lang-csharp">public partial class App : PrismApplication
{

    public App() : this(null) { }

    public App(IPlatformInitializer initializer) : base(initializer) { }

    protected override async void OnInitialized()
    {
        InitializeComponent();

        var result = await NavigationService.NavigateAsync(&quot;NavigationPage/MainPage&quot;);
    }

    protected override void RegisterTypes(IContainerRegistry containerRegistry)
    {
        containerRegistry.RegisterForNavigation&lt;NavigationPage&gt;();
        containerRegistry.RegisterForNavigation&lt;MainPage&gt;();
    }

    protected override void OnResume()
    {
        base.OnResume();

        // TODO: Refresh network data, perform UI updates, and reacquire resources like cameras, I/O devices, etc.
    }

    protected override void OnSleep()
    {
        base.OnSleep();

        // TODO: This is the time to save app data in case the process is terminated.
        // This is the perfect timing to release exclusive resources (camera, I/O devices, etc...)
    }
}
</code></pre><h2 id="handling-app-resume-and-suspend">Handling app resume and suspend</h2>
<p>In general, an application goes into <strong>sleep mode</strong> when it no longer commands the screen and has become inactive. From this sleep mode, an application can be <strong>resumed</strong> (signaled by an <code>OnResume()</code> call) or <strong>terminated</strong>. But this is important: after the <code>OnSleep()</code> call, there is <strong>no further notification</strong> that an application is being terminated. The <code>OnSleep()</code> call is as close as you get to a termination notification, and it always precedes a termination. For example, if your application is running and the user turns off the phone, the application gets an <code>OnSleep()</code> call as the phone is shutting down. If your program has established a connection with a web service, or is in the process of establishing such a connection, you might want to use <code>OnResume()</code> to restore that connection. Perhaps the connection has timed out in the interval that the program was inactive. Or perhaps some fresh data is available.</p>
<h2 id="debugging-tips-and-tricks">Debugging tips and tricks</h2>
<p>When your app is attached to the Visual Studio debugger, it will not be suspended. You can suspend it from the debugger, however, and then send it a Resume event so that you can debug your code. Make sure the Debug Location toolbar is visible and click the drop-down next to the Suspend icon. Then choose Resume.</p>
<p><img src="images/xf-iapplicationlifecycleaware-debug-location.png" alt="how to activate debug-location"></p>
<h2 id="reference">Reference</h2>
<ul>
<li><p><a href="https://docs.microsoft.com/en-us/xamarin/xamarin-forms/app-fundamentals/app-lifecycle">Xamarin Docs App Lifecycle</a></p>
</li>
<li><p><a href="https://xamarin.azureedge.net/developer/xamarin-forms-book/XamarinFormsBook-Ch06-Apr2016.pdf">Xamarin Forms Book</a></p>
</li>
<li><p><a href="https://github.com/PrismLibrary/Prism/blob/36dc541274edb3e1d1ee2957e1ae65aafbf6c0a1/Source/Xamarin/Prism.Forms/PrismApplicationBase.cs">PrismApplicationBase source code</a></p>
</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix" style="margin-top: 0px;">
              <div class="connect-widget">
                <ul class="connect-links">
          		<li id="connect-github">
          			<a href="https://github.com/PrismLibrary/Prism-Documentation/blob/master/docs/xamarin-forms/application-lifecycle.md/#L1" target="_blank">
          				<div class="image github"></div>Edit on GitHub
          			</a>
                  </li>
                  <li id="connect-stack-overflow">
                      <a href="https://stackoverflow.com/questions/tagged/prism" target="_blank">
                          <div class="image stackoverflow"></div>Ask questions
                      </a>
                  </li>
                  <li id="connect-twitter">
                      <a href="https://twitter.com/prismlib" target="_blank">
                          <div class="image twitterhandle"></div>Follow @PrismLib
                      </a>
                  </li>
                  <li id="connect-twitter">
                      <a href="https://twitter.com/brianlagunas" target="_blank">
                          <div class="image twitterhandle"></div>Follow @BrianLagunas
                      </a>
                  </li>
                  <li id="connect-twitter">
                      <a href="https://twitter.com/danjsiegel" target="_blank">
                          <div class="image twitterhandle"></div>Follow @DanJSiegel
                      </a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright 2017 Prism
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
